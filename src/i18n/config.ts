import i18n from "i18next";
import { initReactI18next } from "react-i18next";

export const LANGUAGE_STORAGE_KEY = "zeitown:language";
export const SUPPORTED_LANGUAGES = ["en", "tr"] as const;
export type SupportedLanguage = (typeof SUPPORTED_LANGUAGES)[number];

const fallbackLanguage: SupportedLanguage = "en";

export const detectInitialLanguage = (): SupportedLanguage => {
  if (typeof window === "undefined") {
    return fallbackLanguage;
  }

  const persisted = window.localStorage.getItem(
    LANGUAGE_STORAGE_KEY,
  ) as SupportedLanguage | null;

  if (persisted && SUPPORTED_LANGUAGES.includes(persisted)) {
    return persisted;
  }

  const browserLanguage = window.navigator.language.toLowerCase();
  if (browserLanguage.startsWith("tr")) {
    return "tr";
  }

  return "en";
};

const resources = {
  en: {
    common: {
      heroTitle: "ZeiTown",
      heroSubtitle: "A modern, minimalist take on the classic village board duel.",
      startGame: "Start Game",
      howToPlay: "How to Play",
      howToIntro: "Zeitown blends classic Monopoly loops with modern city-building economy.",
      howToBody:
        "1) Roll two dice, advance clockwise, and collect 200 ZC each time you cross City Gate. 2) Buy vacant districts, build up to 4 investments plus a landmark once you own the whole color group. 3) Pay rent, taxes, and card effects immediately; draw Chance/Chest cards when indicated. 4) Use the Trade Desk to swap Zeicoin or deeds, mortgage plots for liquidity, and upgrade strategically. 5) If a player cannot pay a debt their portfolio transfers to the creditor; last investor standing becomes the Zeitown magnate.",
      settings: "Settings",
      leaderboard: "Leaderboard",
      version: "v1.0 © 2025 Zeigarn",
      rightsReserved: "All rights reserved.",
      licenseNotice: "Licensed under Apache License 2.0.",
      offlineBadge: "Offline Ready",
      villageTheme: "Contemporary Village Strategy",
      comingSoon: "Story Mode Coming Soon",
      setupTitle: "Configure Match",
      setupSubtitle: "Choose player count and your artisan token to enter ZeiTown.",
      playerCountLabel: "Player Count",
      characterSelectLabel: "Choose Your Token",
      continue: "Continue",
      back: "Back",
      playerCountOption: "{{count}} Players",
      playerLabel: "Player {{index}}",
      playerNameLabel: "Player {{index}} Name",
      tokenSelectLabel: "Token",
      nameRequired: "Please enter a name for every player.",
      turnIndicator: "Turn: {{name}}",
      rollDice: "Roll Dice",
      currencySymbol: "ZC",
      eventFeedTitle: "Latest Events",
      logEmpty: "No events yet.",
      cardChanceLabel: "Chance Card",
      cardChestLabel: "Chest Card",
      dismissCard: "Close",
      purchasePromptTitle: "Available Property",
      purchasePromptDesc: "{{player}} can buy this property for {{price}}.",
      purchaseBuyButton: "Buy for {{price}}",
      purchasePassButton: "Pass",
      upgradePromptTitle: "Investment Upgrade",
      upgradePromptDesc: "Upgrade to tier {{level}} for {{price}} to boost rent.",
      upgradeBuyButton: "Upgrade ({{price}})",
      upgradePassButton: "Skip Upgrade",
      eventRecentBadge: "Live",
      purchaseIdleHint: "Roll the dice to keep the story moving.",
      playerPanelTitle: "Investors",
      dicePanelTitle: "Dice Control",
      actionPanelTitle: "Tile Overview",
      ownerLabel: "Owner",
      investmentLabel: "Development",
      availableActions: "Actions",
      upgradeAction: "Upgrade",
      mortgageAction: "Mortgage",
      redeemAction: "Redeem",
      actionUnavailable: "Unavailable",
      tileFreeLabel: "Unowned",
      tileMortgagedLabel: "Mortgaged",
      statusInJail: "City Hall Hold",
      actionsHint: "Invest, upgrade or secure cash from this plot.",
      tradePanelTitle: "Trade Desk",
      tradeLiveBadge: "Active",
      tradeDescription: "Swap Zeicoin or deeds to strike diplomacy.",
      tradeFromLabel: "From",
      tradeToLabel: "To",
      tradeAmountLabel: "Zeicoin Amount",
      tradeSendButton: "Send",
      tradeCardHeader: "Card Exchange",
      tradeGiveLabel: "Offer Card",
      tradeReceiveLabel: "Request Card",
      tradeNoCardOption: "No card",
      tradeSwapButton: "Complete Exchange",
      tradeSelectDifferent: "Choose two different investors.",
      tradeAmountInvalid: "Enter a valid Zeicoin amount.",
      tradeInsufficientFunds: "Insufficient Zeicoin for this transfer.",
      tradeSelectCard: "Select at least one card to trade.",
      tradeInvalidOwnership: "Selected card is not owned by that player.",
      tradeOfferHint: "Combine Zeicoin and deeds to craft a unique offer.",
      tradeGiveCashLabel: "Zeicoin you send",
      tradeReceiveCashLabel: "Zeicoin you request",
      tradeGiveCardsLabel: "{{name}}’s deeds",
      tradeReceiveCardsLabel: "{{name}}’s deeds",
      tradeNoCards: "No deeds available.",
      tradeSendOfferButton: "Send Offer",
      tradePendingOfferExists: "Another trade is waiting for a response.",
      tradeSelectValue: "Add at least one value or deed to the offer.",
      tradeInsufficientFundsTarget: "{{name}} doesn’t have enough Zeicoin.",
      tradeOfferBlocked: "Trade could not be created.",
      tradeOfferSent: "Offer sent to {{name}}, awaiting response.",
      tradePendingNotice: "{{from}} proposed a trade to {{to}}.",
      tradePendingIncomingShort: "{{name}} sent you a trade offer.",
      tradePendingSelf: "Waiting for {{name}} to respond.",
      tradeWithdrawButton: "Withdraw Offer",
      tradeIncomingTitle: "{{name}} proposes a trade",
      tradeOfferGiveSection: "{{name}} gives",
      tradeOfferReceiveSection: "{{name}} gives",
      tradeAcceptButton: "Accept Offer",
      tradeRejectButton: "Decline",
      tradeNoItems: "Nothing",
      token: {
        teslaCoil: "Tesla Coil",
        honeyBadger: "Honey Badger",
        tractor: "Tractor",
        orca: "Orca",
        dog: "Shepherd",
        pig: "Pasture Pig",
        bear: "Berry Bear",
        frog: "Moss Frog",
      },
      portfolioLabel: "Holdings",
      portfolioEmpty: "No deeds yet.",
    },
  },
  tr: {
    common: {
      heroTitle: "ZeiTown",
      heroSubtitle: "Klasik köy temalı stratejinin modern ve minimalist yorumu.",
      startGame: "Oyunu Başlat",
      howToPlay: "Nasıl Oynanır",
      howToIntro: "Zeitown, klasik Monopoly akışını modern şehir ekonomisi kurgusuyla birleştirir.",
      howToBody:
        "1) İki zar at, zar kadar saat yönünde ilerle ve City Gate'ten her geçişte 200 ZC al. 2) Boş bölgeleri satın al, renk setini tamamladığında 4 yatırıma kadar bina ve ardından landmark kur. 3) Kira, vergi ve kart etkilerini anında uygula; Chance/Sandık alanlarına geldiğinde kart çek. 4) Takas Masası'ndan Zeicoin veya tapu değişimi yap, nakit için rehin ver, yatırımlarını akıllıca yükselt. 5) Borcunu ödeyemeyen oyuncunun portföyü alacaklıya devredilir; ayakta kalan son yatırımcı Zeitown'un lideri olur.",
      settings: "Ayarlar",
      leaderboard: "Liderlik Tablosu",
      version: "v1.0 © 2025 Zeigarn",
      rightsReserved: "Tüm hakları saklıdır.",
      licenseNotice: "Apache 2.0 Lisansı altında yayınlanmıştır.",
      offlineBadge: "Çevrimdışı Hazır",
      villageTheme: "Modern Köy Stratejisi",
      comingSoon: "Hikâye Modu Çok Yakında",
      setupTitle: "Oyunu Kur",
      setupSubtitle: "Oyuncu sayısını ve artisan karakterini seçerek maceraya hazırlan.",
      playerCountLabel: "Oyuncu Sayısı",
      characterSelectLabel: "Karakterini Seç",
      continue: "Devam Et",
      back: "Geri",
      playerCountOption: "{{count}} Oyuncu",
      playerLabel: "Oyuncu {{index}}",
      playerNameLabel: "Oyuncu {{index}} Adı",
      tokenSelectLabel: "Karakter",
      nameRequired: "Lütfen tüm oyuncular için ad gir.",
      turnIndicator: "Sıra {{name}}'de",
      rollDice: "Zar At",
      currencySymbol: "ZC",
      eventFeedTitle: "Son Olaylar",
      logEmpty: "Henüz bir olay yok.",
      cardChanceLabel: "Şans Kartı",
      cardChestLabel: "Sandık Kartı",
      dismissCard: "Kapat",
      purchasePromptTitle: "Satın Alma Fırsatı",
      purchasePromptDesc: "{{player}} bu araziyi {{price}} karşılığında alabilir.",
      purchaseBuyButton: "{{price}} karşılığında satın al",
      purchasePassButton: "Pas Geç",
      upgradePromptTitle: "Yatırım Geliştirme",
      upgradePromptDesc: "{{price}} karşılığında {{level}} seviyesine yükselt.",
      upgradeBuyButton: "Yükselt ({{price}})",
      upgradePassButton: "Geliştirmeyi Atla",
      eventRecentBadge: "Canlı",
      purchaseIdleHint: "Hikayeyi sürdürmek için zar at.",
      playerPanelTitle: "Yatırımcılar",
      dicePanelTitle: "Zar Paneli",
      actionPanelTitle: "Arazi Özeti",
      ownerLabel: "Sahip",
      investmentLabel: "Gelişim",
      availableActions: "İşlemler",
      upgradeAction: "Yükselt",
      mortgageAction: "Rehin Ver",
      redeemAction: "Rehini Kaldır",
      actionUnavailable: "Kullanılamaz",
      tileFreeLabel: "Boş",
      tileMortgagedLabel: "Rehinli",
      statusInJail: "Belediye Denetimi",
      actionsHint: "Bu arsada yatırım yapabilir veya nakit açığını kapatabilirsin.",
      tradePanelTitle: "Takas Masası",
      tradeLiveBadge: "Aktif",
      tradeDescription: "Zeicoin ya da tapu değiş tokuş ederek anlaş.",
      tradeFromLabel: "Gönderen",
      tradeToLabel: "Alan",
      tradeAmountLabel: "Zeicoin Tutarı",
      tradeSendButton: "Gönder",
      tradeCardHeader: "Kart Takası",
      tradeGiveLabel: "Verilecek Kart",
      tradeReceiveLabel: "Alınacak Kart",
      tradeNoCardOption: "Kart yok",
      tradeSwapButton: "Takas Yap",
      tradeSelectDifferent: "Farklı iki oyuncu seçmelisin.",
      tradeAmountInvalid: "Geçerli bir Zeicoin tutarı gir.",
      tradeInsufficientFunds: "Bu transfer için yeterli Zeicoin yok.",
      tradeSelectCard: "Takas için en az bir kart seç.",
      tradeInvalidOwnership: "Seçilen kart ilgili oyuncuya ait değil.",
      tradeOfferHint: "Zeicoin ve tapuları birleştirerek özgün bir teklif hazırla.",
      tradeGiveCashLabel: "Gönderilecek Zeicoin",
      tradeReceiveCashLabel: "Talep edilen Zeicoin",
      tradeGiveCardsLabel: "{{name}} için tapular",
      tradeReceiveCardsLabel: "{{name}} için tapular",
      tradeNoCards: "Eklenebilecek tapu yok.",
      tradeSendOfferButton: "Teklif Gönder",
      tradePendingOfferExists: "Başka bir takas yanıt bekliyor.",
      tradeSelectValue: "Teklife değer katmak için en az bir kalem ekle.",
      tradeInsufficientFundsTarget: "{{name}} yeterli Zeicoin’e sahip değil.",
      tradeOfferBlocked: "Takas oluşturulamadı.",
      tradeOfferSent: "Teklif {{name}} kişisine iletildi, yanıt bekleniyor.",
      tradePendingNotice: "{{from}}, {{to}} kişisine teklif gönderdi.",
      tradePendingIncomingShort: "{{name}} sana bir teklif gönderdi.",
      tradePendingSelf: "{{name}} yanıt verene kadar bekleniyor.",
      tradeWithdrawButton: "Teklifi Geri Çek",
      tradeIncomingTitle: "{{name}} bir takas teklif ediyor",
      tradeOfferGiveSection: "{{name}} veriyor",
      tradeOfferReceiveSection: "{{name}} veriyor",
      tradeAcceptButton: "Teklifi Kabul Et",
      tradeRejectButton: "Reddet",
      tradeNoItems: "Boş",
      token: {
        teslaCoil: "Tesla Bobini",
        honeyBadger: "Bal Porsuğu",
        tractor: "Traktör",
        orca: "Orca Balinası",
        dog: "Çoban Köpeği",
        pig: "Yayla Domuzu",
        bear: "Ormancı Ayı",
        frog: "Saz Kurbağası",
      },
      portfolioLabel: "Portföy",
      portfolioEmpty: "Henüz tapu yok.",
    },
  },
} as const;

void i18n.use(initReactI18next).init({
  resources,
  lng: detectInitialLanguage(),
  fallbackLng: fallbackLanguage,
  defaultNS: "common",
  interpolation: {
    escapeValue: false,
  },
});

export default i18n;
