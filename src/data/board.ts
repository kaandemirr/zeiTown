export type TileType =
  | "start"
  | "property"
  | "railway"
  | "utility"
  | "chance"
  | "chest"
  | "tax"
  | "parking"
  | "jail"
  | "gotojail";

export interface TileDefinition {
  id: string;
  type: TileType;
  name: string;
  color?: string;
  group?: string;
  price?: number;
  rent?: number;
  rentLevels?: number[];
  houseCost?: number;
  mortgage?: number;
  icon?: string;
  description?: string;
}

const COLOR_GROUPS = {
  brown: "#8b5b29",
  lightBlue: "#7dd3fc",
  magenta: "#ec4899",
  orange: "#fb923c",
  red: "#ef4444",
  yellow: "#facc15",
  green: "#22c55e",
  navy: "#2563eb",
};

export const BOARD_TILES: TileDefinition[] = [
  { id: "start", type: "start", name: "Baslangic", icon: "redo" },
  {
    id: "alabayir",
    type: "property",
    name: "Alabayir Koyu",
    color: COLOR_GROUPS.brown,
    group: "brown",
    price: 60,
    rent: 2,
    rentLevels: [10, 30, 90, 160, 250],
    houseCost: 50,
    mortgage: 30,
  },
  { id: "heirloom-chest-1", type: "chest", name: "Yayla Sandigi", icon: "inventory_2" },
  {
    id: "yagcilar",
    type: "property",
    name: "Yagcilar Koyu",
    color: COLOR_GROUPS.brown,
    group: "brown",
    price: 60,
    rent: 4,
    rentLevels: [10, 30, 90, 160, 250],
    houseCost: 50,
    mortgage: 30,
  },
  { id: "village-tax", type: "tax", name: "Koy Fonu", icon: "payments", price: 200 },
  {
    id: "heritage-rail",
    type: "railway",
    name: "Heritage Rail",
    icon: "train",
    group: "rail",
    price: 200,
    rent: 25,
    mortgage: 100,
  },
  {
    id: "sogancilar",
    type: "property",
    name: "Sogancilar Koyu",
    color: COLOR_GROUPS.lightBlue,
    group: "lightBlue",
    price: 100,
    rent: 6,
    rentLevels: [30, 90, 270, 400, 550],
    houseCost: 50,
    mortgage: 50,
  },
  { id: "chance-mist-1", type: "chance", name: "Sis Karti", icon: "help" },
  {
    id: "derekoy",
    type: "property",
    name: "Derekoy",
    color: COLOR_GROUPS.lightBlue,
    group: "lightBlue",
    price: 100,
    rent: 6,
    rentLevels: [30, 90, 270, 400, 550],
    houseCost: 50,
    mortgage: 50,
  },
  {
    id: "hamsikoy",
    type: "property",
    name: "Hamsikoy",
    color: COLOR_GROUPS.lightBlue,
    group: "lightBlue",
    price: 120,
    rent: 8,
    rentLevels: [30, 90, 270, 400, 550],
    houseCost: 50,
    mortgage: 60,
  },
  { id: "just-visiting", type: "jail", name: "Hapis", icon: "gavel" },
  {
    id: "golcuk",
    type: "property",
    name: "Golcuk",
    color: COLOR_GROUPS.magenta,
    group: "magenta",
    price: 140,
    rent: 10,
    rentLevels: [50, 150, 450, 625, 750],
    houseCost: 100,
    mortgage: 70,
  },
  {
    id: "hydro-mill",
    type: "utility",
    name: "Hidro Degirmen",
    icon: "water_drop",
    group: "utility",
    price: 150,
    rent: 4,
    mortgage: 75,
  },
  {
    id: "bahcecik",
    type: "property",
    name: "Bahcecik",
    color: COLOR_GROUPS.magenta,
    group: "magenta",
    price: 140,
    rent: 10,
    rentLevels: [50, 150, 450, 625, 750],
    houseCost: 100,
    mortgage: 70,
  },
  {
    id: "degirmendere",
    type: "property",
    name: "Degirmendere",
    color: COLOR_GROUPS.magenta,
    group: "magenta",
    price: 160,
    rent: 12,
    rentLevels: [50, 150, 450, 625, 750],
    houseCost: 100,
    mortgage: 80,
  },
  {
    id: "forest-rail",
    type: "railway",
    name: "Forest Rail",
    icon: "train",
    group: "rail",
    price: 200,
    rent: 25,
    mortgage: 100,
  },
  {
    id: "caykara",
    type: "property",
    name: "Caykara",
    color: COLOR_GROUPS.orange,
    group: "orange",
    price: 180,
    rent: 14,
    rentLevels: [70, 200, 550, 750, 950],
    houseCost: 100,
    mortgage: 90,
  },
  { id: "heirloom-chest-2", type: "chest", name: "Yayla Sandigi", icon: "inventory_2" },
  {
    id: "uzungol",
    type: "property",
    name: "Uzungol",
    color: COLOR_GROUPS.orange,
    group: "orange",
    price: 180,
    rent: 14,
    rentLevels: [70, 200, 550, 750, 950],
    houseCost: 100,
    mortgage: 90,
  },
  {
    id: "tonya",
    type: "property",
    name: "Tonya",
    color: COLOR_GROUPS.orange,
    group: "orange",
    price: 200,
    rent: 16,
    rentLevels: [70, 200, 550, 750, 950],
    houseCost: 100,
    mortgage: 100,
  },
  { id: "free-parking", type: "parking", name: "Otopark", icon: "local_parking" },
  {
    id: "camlibel",
    type: "property",
    name: "Camlibel",
    color: COLOR_GROUPS.red,
    group: "red",
    price: 220,
    rent: 18,
    rentLevels: [90, 250, 700, 875, 1050],
    houseCost: 150,
    mortgage: 110,
  },
  { id: "chance-mist-2", type: "chance", name: "Sis Karti", icon: "help" },
  {
    id: "ortakoy",
    type: "property",
    name: "Ortakoy",
    color: COLOR_GROUPS.red,
    group: "red",
    price: 220,
    rent: 18,
    rentLevels: [90, 250, 700, 875, 1050],
    houseCost: 150,
    mortgage: 110,
  },
  {
    id: "yaylaci",
    type: "property",
    name: "Yaylaci",
    color: COLOR_GROUPS.red,
    group: "red",
    price: 240,
    rent: 20,
    rentLevels: [90, 250, 700, 875, 1050],
    houseCost: 150,
    mortgage: 120,
  },
  {
    id: "coastal-rail",
    type: "railway",
    name: "Coastal Rail",
    icon: "train",
    group: "rail",
    price: 200,
    rent: 25,
    mortgage: 100,
  },
  {
    id: "zeytinlik",
    type: "property",
    name: "Zeytinlik",
    color: COLOR_GROUPS.yellow,
    group: "yellow",
    price: 260,
    rent: 22,
    rentLevels: [110, 330, 800, 975, 1150],
    houseCost: 150,
    mortgage: 130,
  },
  {
    id: "kavakli",
    type: "property",
    name: "Kavakli",
    color: COLOR_GROUPS.yellow,
    group: "yellow",
    price: 260,
    rent: 22,
    rentLevels: [110, 330, 800, 975, 1150],
    houseCost: 150,
    mortgage: 130,
  },
  {
    id: "solar-fields",
    type: "utility",
    name: "Solar Fields",
    icon: "lightbulb",
    group: "utility",
    price: 150,
    rent: 4,
    mortgage: 75,
  },
  {
    id: "melen",
    type: "property",
    name: "Melen",
    color: COLOR_GROUPS.yellow,
    group: "yellow",
    price: 280,
    rent: 24,
    rentLevels: [110, 330, 800, 975, 1150],
    houseCost: 150,
    mortgage: 140,
  },
  { id: "goto-jail", type: "gotojail", name: "Hapse Gir", icon: "front_hand" },
  {
    id: "yesilkoy",
    type: "property",
    name: "Yesilkoy",
    color: COLOR_GROUPS.green,
    group: "green",
    price: 300,
    rent: 26,
    rentLevels: [130, 390, 900, 1100, 1275],
    houseCost: 200,
    mortgage: 150,
  },
  {
    id: "gumusova",
    type: "property",
    name: "Gumusova",
    color: COLOR_GROUPS.green,
    group: "green",
    price: 300,
    rent: 26,
    rentLevels: [130, 390, 900, 1100, 1275],
    houseCost: 200,
    mortgage: 150,
  },
  { id: "heirloom-chest-3", type: "chest", name: "Yayla Sandigi", icon: "inventory_2" },
  {
    id: "sarikoy",
    type: "property",
    name: "Sarikoy",
    color: COLOR_GROUPS.green,
    group: "green",
    price: 320,
    rent: 28,
    rentLevels: [130, 390, 900, 1100, 1275],
    houseCost: 200,
    mortgage: 160,
  },
  {
    id: "summit-rail",
    type: "railway",
    name: "Summit Rail",
    icon: "train",
    group: "rail",
    price: 200,
    rent: 25,
    mortgage: 100,
  },
  { id: "chance-mist-3", type: "chance", name: "Sis Karti", icon: "help" },
  {
    id: "lazova",
    type: "property",
    name: "Lazova",
    color: COLOR_GROUPS.navy,
    group: "navy",
    price: 350,
    rent: 35,
    rentLevels: [175, 500, 1100, 1300, 1500],
    houseCost: 200,
    mortgage: 175,
  },
  { id: "civic-tax", type: "tax", name: "Civic Levy", icon: "payments", price: 100 },
  {
    id: "hidirnebi",
    type: "property",
    name: "Hidirnebi",
    color: COLOR_GROUPS.navy,
    group: "navy",
    price: 400,
    rent: 50,
    rentLevels: [200, 600, 1400, 1700, 2000],
    houseCost: 200,
    mortgage: 200,
  },
];

export const BOARD_AREAS = [
  "corner-bl",
  "prop-b9",
  "prop-b8",
  "prop-b7",
  "prop-b6",
  "prop-b5",
  "prop-b4",
  "prop-b3",
  "prop-b2",
  "prop-b1",
  "corner-br",
  "prop-r1",
  "prop-r2",
  "prop-r3",
  "prop-r4",
  "prop-r5",
  "prop-r6",
  "prop-r7",
  "prop-r8",
  "prop-r9",
  "corner-tr",
  "prop-t1",
  "prop-t2",
  "prop-t3",
  "prop-t4",
  "prop-t5",
  "prop-t6",
  "prop-t7",
  "prop-t8",
  "prop-t9",
  "corner-tl",
  "prop-l9",
  "prop-l8",
  "prop-l7",
  "prop-l6",
  "prop-l5",
  "prop-l4",
  "prop-l3",
  "prop-l2",
  "prop-l1",
] as const;

if (BOARD_TILES.length !== BOARD_AREAS.length) {
  throw new Error("Board tiles and area mapping must have equal length");
}

export type CardEffect =
  | { action: "collect"; amount: number }
  | { action: "pay"; amount: number }
  | { action: "move"; target: number }
  | { action: "move-relative"; offset: number }
  | { action: "repair"; houseCost: number; hotelCost: number }
  | { action: "advance-to-next"; tileType: TileType }
  | { action: "get-out-of-jail" }
  | { action: "go-to-jail" }
  | { action: "luck-check"; success: number; failure: number };

export interface CardDefinition {
  id: string;
  title: string;
  description: string;
  effect: CardEffect;
}

export const CHANCE_CARDS: CardDefinition[] = [
  {
    id: "chance-advance-city-gate",
    title: "City Gate Töreni",
    description: "Şehir kapısına ışınlan ve teşvik bonusunu al.",
    effect: { action: "move", target: 0 },
  },
  {
    id: "chance-go-to-jail",
    title: "Denetim Baskını",
    description: "Belgelerin eksik, doğrudan belediye denetimine gidiyorsun.",
    effect: { action: "go-to-jail" },
  },
  {
    id: "chance-rail-contract",
    title: "Hat İhalesi",
    description: "En yakın ulaşım hattına ilerle ve gerekiyorsa kira öde.",
    effect: { action: "advance-to-next", tileType: "railway" },
  },
  {
    id: "chance-utility-route",
    title: "Altyapı Atlaması",
    description: "Bir sonraki kamu hizmetine ilerle.",
    effect: { action: "advance-to-next", tileType: "utility" },
  },
  {
    id: "chance-harvest-boom",
    title: "Rekolte Patlaması",
    description: "Kooperatiften büyük sipariş aldın.",
    effect: { action: "collect", amount: 200 },
  },
  {
    id: "chance-storm-repair",
    title: "Doludan Zarar",
    description: "Tüm yatırımlarını onarmak zorundasın.",
    effect: { action: "repair", houseCost: 25, hotelCost: 110 },
  },
  {
    id: "chance-ridge-road",
    title: "Sisli Geçit",
    description: "Geriye üç kare kaydın.",
    effect: { action: "move-relative", offset: -3 },
  },
  {
    id: "chance-investor-gala",
    title: "Yatırımcı Galası",
    description: "Yeni ortaklıklar kurdun, kasana zeicoin aktı.",
    effect: { action: "collect", amount: 150 },
  },
  {
    id: "chance-luck-lab",
    title: "Risk Sermayesi",
    description: "Zar at: çift gelirse 200 Zeicoin kazan, aksi halde 50 öde.",
    effect: { action: "luck-check", success: 200, failure: 50 },
  },
  {
    id: "chance-new-tram",
    title: "Tramvay Dönüşümü",
    description: "Proje hızlandı, ileri dört kare ilerle.",
    effect: { action: "move-relative", offset: 4 },
  },
];

export const CHEST_CARDS: CardDefinition[] = [
  {
    id: "chest-coop-dividend",
    title: "Kooperatif Temettüsü",
    description: "Sezon kapanışı beklediğinden güçlü.",
    effect: { action: "collect", amount: 100 },
  },
  {
    id: "chest-festival-reward",
    title: "Festival Ödülü",
    description: "Zeitown Kültür Festivali seni onurlandırdı.",
    effect: { action: "collect", amount: 150 },
  },
  {
    id: "chest-community-grant",
    title: "Topluluk Hibesi",
    description: "Mahalle meclisi yatırımlarını destekliyor.",
    effect: { action: "collect", amount: 75 },
  },
  {
    id: "chest-routine-checkup",
    title: "Sağlık Denetimi",
    description: "Kamu sağlığı fonuna bağış yap.",
    effect: { action: "pay", amount: 50 },
  },
  {
    id: "chest-infra-upgrade",
    title: "Altyapı Güncellemesi",
    description: "Yeni fiber hattı için katkı yap.",
    effect: { action: "pay", amount: 100 },
  },
  {
    id: "chest-get-out-of-jail",
    title: "Ruhsat Affı",
    description: "İhtiyaç halinde belediye mühürünü kullan.",
    effect: { action: "get-out-of-jail" },
  },
  {
    id: "chest-go-to-jail",
    title: "Denetim Çağrısı",
    description: "Belgelerin eksik, belediyeye git.",
    effect: { action: "go-to-jail" },
  },
  {
    id: "chest-return-city-gate",
    title: "Yeni Finansman",
    description: "Şehir kapısına dön ve yatırım teşviki al.",
    effect: { action: "move", target: 0 },
  },
];
